<div class="container mx-auto p-4">
  <!-- Visão para anônimos e trabalhadores -->
  <ng-container *ngIf="!currentUser || currentUser.role === Role.TRABALHADOR">
    <!-- Hero Section -->
    <div class="text-center py-16">
      <h1 class="text-5xl font-bold mb-4 text-on-background dark:text-on-background-dark">Encontre o Profissional Perfeito para o seu Projeto</h1>
      <p class="text-xl text-on-background dark:text-on-background-dark mb-8">A sua plataforma completa para contratar e oferecer serviços locais.</p>
      <div class="flex justify-center">
        <div class="w-full max-w-2xl">
          <div class="flex items-center border-b-2 border-primary py-2">
            <input #searchInput class="appearance-none bg-transparent border-none w-full text-on-background dark:text-on-background-dark mr-3 py-1 px-2 leading-tight focus:outline-none" type="text" placeholder="Busque por nome ou serviço...">
            <select #categorySelect class="appearance-none bg-transparent border-none w-1/2 text-on-background dark:text-on-background-dark mr-3 py-1 px-2 leading-tight focus:outline-none">
              <option value="">Todas as categorias</option>
              <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
            </select>
            <button (click)="search(searchInput.value, categorySelect.value)" class="flex-shrink-0 bg-primary text-on-primary font-bold py-2 px-6 rounded-full hover:bg-primary-dark transition-colors flex items-center gap-2" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                <path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd" />
              </svg>
              Buscar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- How it Works Section -->
    <div class="py-16">
      <h2 class="text-3xl font-bold text-center mb-10">Como Funciona</h2>
      <div class="grid md:grid-cols-3 gap-8 text-center">
        <div class="flex flex-col items-center">
          <div class="bg-primary rounded-full p-4 inline-block mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-on-primary">
              <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
            </svg>
          </div>
          <h3 class="text-xl font-bold mb-2">1. Busque</h3>
          <p>Filtre por categoria, nome ou localização para achar o que precisa.</p>
        </div>
        <div class="flex flex-col items-center">
          <div class="bg-primary rounded-full p-4 inline-block mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-on-primary">
              <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-6.75 3h9m-9 3h9m-9 3h9M3.75 21a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H3.75" />
            </svg>
          </div>
          <h3 class="text-xl font-bold mb-2">2. Conecte-se</h3>
          <p>Veja perfis detalhados, portfólios e avaliações de outros clientes.</p>
        </div>
        <div class="flex flex-col items-center">
          <div class="bg-primary rounded-full p-4 inline-block mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-on-primary">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12" />
            </svg>
          </div>
          <h3 class="text-xl font-bold mb-2">3. Contrate</h3>
          <p>Entre em contato diretamente com o profissional e feche negócio.</p>
        </div>
      </div>
    </div>

    <!-- Featured Categories -->
    <div class="py-16 bg-surface dark:bg-surface-dark rounded-lg">
      <h2 class="text-3xl font-bold text-center mb-10">Principais Categorias</h2>
      <div class="flex flex-wrap justify-center gap-4">
        <a *ngFor="let category of categories | slice:0:8" [routerLink]="['/search']" [queryParams]="{ category: category.id }" class="bg-background dark:bg-background-dark py-2 px-4 rounded-full shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300">
          {{ category.name }}
        </a>
      </div>
    </div>

    <!-- CTA for Workers -->
    <div class="text-center py-16">
      <h2 class="text-3xl font-bold mb-4">É um profissional autônomo?</h2>
      <p class="text-lg mb-8">Mostre seu talento para toda a cidade. Cadastre-se e crie seu portfólio gratuitamente.</p>
      <button (click)="openRegisterModal()" class="bg-secondary text-on-secondary font-bold py-3 px-8 rounded-full hover:bg-secondary-dark transition-colors text-lg">
        Quero me Cadastrar
      </button>
    </div>

  </ng-container>

  <!-- Visão para Contratantes -->
  <ng-container *ngIf="currentUser && currentUser.role === Role.CONTRATANTE">
    <h1 class="text-4xl font-bold mb-4 text-on-background dark:text-on-background-dark">Dashboard do Contratante</h1>
    <p class="text-lg text-on-background dark:text-on-background-dark mb-8">Veja os trabalhadores mais bem recomendados ou faça uma busca.</p>

    <!-- Barra de busca também disponível para contratantes -->
    <div class="flex justify-center mb-12">
      <div class="w-full max-w-lg">
        <div class="flex items-center border-b-2 border-primary py-2">
          <input #contractorSearchInput class="appearance-none bg-transparent border-none w-full text-on-background dark:text-on-background-dark mr-3 py-1 px-2 leading-tight focus:outline-none" type="text" placeholder="Buscar por nome...">
          <select #contractorCategorySelect class="appearance-none bg-transparent border-none w-full text-on-background dark:text-on-background-dark mr-3 py-1 px-2 leading-tight focus:outline-none">
            <option value="">Todas as categorias</option>
            <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
          </select>
          <button (click)="search(contractorSearchInput.value, contractorCategorySelect.value)" class="flex-shrink-0 bg-primary hover:bg-primary-dark border-primary hover:border-primary-dark text-sm border-4 text-on-primary py-1 px-2 rounded flex items-center gap-2 transition-colors" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd" />
            </svg>
            Buscar
          </button>
        </div>
      </div>
    </div>

    <!-- Trabalhadores recomendados -->
    <h2 class="text-2xl font-bold mb-4 text-on-background dark:text-on-background-dark">Trabalhadores Recomendados</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-left">
      <div *ngFor="let worker of topRatedWorkers" class="bg-surface dark:bg-surface-dark rounded-lg shadow-md p-4 flex flex-col transition-all duration-300 ease-in-out hover:shadow-lg hover:-translate-y-1">
        <h3 class="text-xl font-bold text-on-surface dark:text-on-surface-dark">{{ worker.user.name }}</h3>
        <p class="text-on-surface-variant dark:text-on-surface-variant-dark mt-1 text-sm">{{ worker.location }}</p>
        <p class="text-on-surface dark:text-on-surface-dark mt-2 flex-grow">{{ worker.bio | slice:0:100 }}{{ worker.bio.length > 100 ? '...' : '' }}</p>
        <div class="mt-4">
          <span *ngFor="let category of worker.categories" class="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm font-medium mr-2 mb-2 px-2.5 py-0.5 rounded inline-block">{{ category.name }}</span>
        </div>
        <a [routerLink]="['/worker', worker.id]" class="text-primary hover:underline mt-4 font-bold self-start">Ver Perfil</a>
      </div>
    </div>
  </ng-container>
</div>