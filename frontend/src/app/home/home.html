<div class="min-h-screen flex flex-col">
  <!-- Hero Section -->
  <div class="relative overflow-hidden bg-background-light dark:bg-background-dark pt-24 pb-16 sm:pb-24 lg:pb-32">
    <!-- Background decoration -->
    <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full z-0 pointer-events-none">
      <div
        class="absolute top-20 left-10 w-72 h-72 bg-primary/20 rounded-full blur-3xl mix-blend-multiply animate-blob">
      </div>
      <div
        class="absolute top-20 right-10 w-72 h-72 bg-secondary/20 rounded-full blur-3xl mix-blend-multiply animate-blob animation-delay-2000">
      </div>
      <div
        class="absolute -bottom-8 left-1/2 w-72 h-72 bg-purple-500/20 rounded-full blur-3xl mix-blend-multiply animate-blob animation-delay-4000">
      </div>
    </div>

    <div class="relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <ng-container *ngIf="!currentUser || currentUser.role === Role.TRABALHADOR">
        <h1
          class="text-5xl md:text-7xl font-display font-bold tracking-tight text-on-background-light dark:text-on-background-dark mb-6 animate-fade-in">
          {{ 'HOME.HERO.TITLE' | translate }}
        </h1>
        <p
          class="mt-4 text-xl text-on-surface-light/70 dark:text-on-surface-dark/70 max-w-2xl mx-auto mb-10 animate-slide-up">
          <ng-container *ngIf="!currentUser">{{ 'HOME.HERO.SUBTITLE' | translate }}</ng-container>
          <ng-container *ngIf="currentUser?.role === Role.TRABALHADOR">Explore o mercado e encontre outros talentos na
            plataforma.</ng-container>
        </p>

        <!-- Search Bar -->
        <div class="max-w-3xl mx-auto animate-slide-up" style="animation-delay: 0.2s;">
          <div
            class="bg-surface-light dark:bg-surface-dark p-2 rounded-2xl shadow-xl border border-white/10 flex flex-col md:flex-row gap-2">
            <div class="flex-1 flex items-center px-4 bg-background-light/50 dark:bg-background-dark/50 rounded-xl">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                class="w-5 h-5 text-gray-400 mr-2">
                <path fill-rule="evenodd"
                  d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z"
                  clip-rule="evenodd" />
              </svg>
              <input #searchInput
                class="w-full bg-transparent border-none focus:ring-0 text-on-background-light dark:text-on-background-dark placeholder-gray-400"
                type="text" [placeholder]="'HOME.HERO.SEARCH_PLACEHOLDER' | translate">
            </div>
            <div
              class="flex-1 flex items-center px-4 bg-background-light/50 dark:bg-background-dark/50 rounded-xl border-t md:border-t-0 md:border-l border-gray-200 dark:border-gray-700">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                class="w-5 h-5 text-gray-400 mr-2">
                <path fill-rule="evenodd"
                  d="M3 6a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3V6ZM3 15.75a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-2.25Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3v-2.25Z"
                  clip-rule="evenodd" />
              </svg>
              <select #categorySelect
                class="w-full bg-transparent border-none focus:ring-0 text-on-background-light dark:text-on-background-dark cursor-pointer">
                <option value="" class="bg-surface-light dark:bg-surface-dark">{{ 'HOME.HERO.ALL_CATEGORIES' | translate
                  }}</option>
                <option *ngFor="let category of categories" [value]="category.id"
                  class="bg-surface-light dark:bg-surface-dark">{{ category.name }}</option>
              </select>
            </div>
            <button (click)="search(searchInput.value, categorySelect.value)"
              class="bg-primary hover:bg-primary-dark text-white font-bold py-3 px-8 rounded-xl shadow-lg shadow-primary/30 hover:shadow-primary/50 transition-all duration-300 transform hover:-translate-y-0.5">
              {{ 'HOME.HERO.SEARCH_BTN' | translate }}
            </button>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="currentUser && currentUser.role === Role.CONTRATANTE">
        <h1
          class="text-4xl md:text-6xl font-display font-bold tracking-tight text-on-background-light dark:text-on-background-dark mb-6 animate-fade-in">
          {{ 'HOME.HERO.WELCOME_BACK' | translate }} <span class="text-primary">{{ currentUser.name.split(' ')[0]
            }}</span>
        </h1>
        <p
          class="mt-4 text-xl text-on-surface-light/70 dark:text-on-surface-dark/70 max-w-2xl mx-auto mb-10 animate-slide-up">
          {{ 'HOME.HERO.CONTRACTOR_SUBTITLE' | translate }}
        </p>

        <!-- Search Bar (Contractor) -->
        <div class="max-w-3xl mx-auto animate-slide-up" style="animation-delay: 0.2s;">
          <div
            class="bg-surface-light dark:bg-surface-dark p-2 rounded-2xl shadow-xl border border-white/10 flex flex-col md:flex-row gap-2">
            <div class="flex-1 flex items-center px-4 bg-background-light/50 dark:bg-background-dark/50 rounded-xl">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                class="w-5 h-5 text-gray-400 mr-2">
                <path fill-rule="evenodd"
                  d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z"
                  clip-rule="evenodd" />
              </svg>
              <input #contractorSearchInput
                class="w-full bg-transparent border-none focus:ring-0 text-on-background-light dark:text-on-background-dark placeholder-gray-400"
                type="text" [placeholder]="'HOME.HERO.SEARCH_NAME_PLACEHOLDER' | translate">
            </div>
            <div
              class="flex-1 flex items-center px-4 bg-background-light/50 dark:bg-background-dark/50 rounded-xl border-t md:border-t-0 md:border-l border-gray-200 dark:border-gray-700">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                class="w-5 h-5 text-gray-400 mr-2">
                <path fill-rule="evenodd"
                  d="M3 6a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3V6ZM3 15.75a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-2.25Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3v-2.25Z"
                  clip-rule="evenodd" />
              </svg>
              <select #contractorCategorySelect
                class="w-full bg-transparent border-none focus:ring-0 text-on-background-light dark:text-on-background-dark cursor-pointer">
                <option value="" class="bg-surface-light dark:bg-surface-dark">{{ 'HOME.HERO.ALL_CATEGORIES' | translate
                  }}</option>
                <option *ngFor="let category of categories" [value]="category.id"
                  class="bg-surface-light dark:bg-surface-dark">{{ category.name }}</option>
              </select>
            </div>
            <button (click)="search(contractorSearchInput.value, contractorCategorySelect.value)"
              class="bg-primary hover:bg-primary-dark text-white font-bold py-3 px-8 rounded-xl shadow-lg shadow-primary/30 hover:shadow-primary/50 transition-all duration-300 transform hover:-translate-y-0.5">
              {{ 'HOME.HERO.SEARCH_BTN' | translate }}
            </button>
          </div>
        </div>
      </ng-container>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-16 space-y-24">

    <!-- How it Works (Public - Logged out ONLY) -->
    <div *ngIf="!currentUser" class="animate-on-scroll">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-display font-bold text-on-background-light dark:text-on-background-dark mb-4">{{
          'HOME.HERO.HOW_IT_WORKS' | translate }}</h2>
        <p class="text-on-surface-light/70 dark:text-on-surface-dark/70 max-w-2xl mx-auto">{{
          'HOME.HERO.HOW_IT_WORKS_SUBTITLE' | translate }}</p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <!-- Step 1 -->
        <div
          class="relative group p-8 rounded-2xl bg-surface-light dark:bg-surface-dark border border-white/5 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
          <div
            class="absolute inset-0 bg-gradient-to-br from-primary/5 to-secondary/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300">
          </div>
          <div class="relative z-10 flex flex-col items-center text-center">
            <div
              class="w-16 h-16 rounded-2xl bg-primary/10 text-primary flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="w-8 h-8">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
              </svg>
            </div>
            <h3 class="text-xl font-bold text-on-surface-light dark:text-on-surface-dark mb-3">{{
              'HOME.HERO.STEPS.1.TITLE' | translate }}</h3>
            <p class="text-on-surface-light/70 dark:text-on-surface-dark/70">{{ 'HOME.HERO.STEPS.1.DESC' | translate }}
            </p>
          </div>
        </div>

        <!-- Step 2 -->
        <div
          class="relative group p-8 rounded-2xl bg-surface-light dark:bg-surface-dark border border-white/5 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
          <div
            class="absolute inset-0 bg-gradient-to-br from-primary/5 to-secondary/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300">
          </div>
          <div class="relative z-10 flex flex-col items-center text-center">
            <div
              class="w-16 h-16 rounded-2xl bg-secondary/10 text-secondary flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="w-8 h-8">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M7.5 8.25h9m-9 3H12m-6.75 3h9m-9 3h9m-9 3h9M3.75 21a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H3.75" />
              </svg>
            </div>
            <h3 class="text-xl font-bold text-on-surface-light dark:text-on-surface-dark mb-3">{{
              'HOME.HERO.STEPS.2.TITLE' | translate }}</h3>
            <p class="text-on-surface-light/70 dark:text-on-surface-dark/70">{{ 'HOME.HERO.STEPS.2.DESC' | translate }}
            </p>
          </div>
        </div>

        <!-- Step 3 -->
        <div
          class="relative group p-8 rounded-2xl bg-surface-light dark:bg-surface-dark border border-white/5 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
          <div
            class="absolute inset-0 bg-gradient-to-br from-primary/5 to-secondary/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300">
          </div>
          <div class="relative z-10 flex flex-col items-center text-center">
            <div
              class="w-16 h-16 rounded-2xl bg-success/10 text-success flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="w-8 h-8">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12" />
              </svg>
            </div>
            <h3 class="text-xl font-bold text-on-surface-light dark:text-on-surface-dark mb-3">{{
              'HOME.HERO.STEPS.3.TITLE' | translate }}</h3>
            <p class="text-on-surface-light/70 dark:text-on-surface-dark/70">{{ 'HOME.HERO.STEPS.3.DESC' | translate }}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Featured Categories (Public - Logged out ONLY) -->
    <div *ngIf="!currentUser" class="animate-on-scroll">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-display font-bold text-on-background-light dark:text-on-background-dark mb-4">{{
          'HOME.HERO.POPULAR_CATEGORIES' | translate }}</h2>
      </div>
      <div class="flex flex-wrap justify-center gap-4">
        <a *ngFor="let category of categories | slice:0:8" [routerLink]="['/search']"
          [queryParams]="{ category: category.id }"
          class="px-6 py-3 rounded-full bg-surface-light dark:bg-surface-dark border border-gray-200 dark:border-gray-700 text-on-surface-light dark:text-on-surface-dark font-medium shadow-sm hover:shadow-md hover:border-primary hover:text-primary transition-all duration-300">
          {{ category.name }}
        </a>
      </div>
    </div>

    <!-- Top Rated Workers -->
    <div *ngIf="topRatedWorkers.length > 0" class="animate-on-scroll">
      <div class="flex justify-between items-end mb-8">
        <div>
          <h2 class="text-3xl font-display font-bold text-on-background-light dark:text-on-background-dark">{{
            'HOME.HERO.RECOMMENDED' | translate }}</h2>
          <p class="text-on-surface-light/70 dark:text-on-surface-dark/70 mt-2 max-w-2xl">{{
            'HOME.HERO.RECOMMENDED_SUBTITLE' | translate }}</p>
        </div>
        <a routerLink="/search"
          class="text-primary hover:text-primary-dark font-medium flex items-center gap-1 bg-primary/5 hover:bg-primary/10 px-4 py-2 rounded-xl transition-colors">
          {{ 'HOME.HERO.VIEW_ALL' | translate }}
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
            <path fill-rule="evenodd"
              d="M3 10a.75.75 0 0 1 .75-.75h10.638L10.23 5.29a.75.75 0 1 1 1.04-1.08l5.5 5.25a.75.75 0 0 1 0 1.08l-5.5 5.25a.75.75 0 1 1-1.04-1.08l4.158-3.96H3.75A.75.75 0 0 1 3 10Z"
              clip-rule="evenodd" />
          </svg>
        </a>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
        <div *ngFor="let worker of topRatedWorkers"
          class="group bg-surface-light dark:bg-surface-dark rounded-3xl p-6 flex flex-col h-full shadow-lg shadow-gray-200/50 dark:shadow-black/20 border border-gray-100 dark:border-white/5 hover:border-primary/50 transition-all duration-300 hover:shadow-xl hover:-translate-y-2 relative overflow-hidden">

          <div class="flex items-start justify-between mb-5 relative z-10">
            <div class="flex items-center gap-4">
              <div
                class="w-14 h-14 rounded-2xl overflow-hidden shadow-md border-2 border-white dark:border-surface-dark">
                <img [src]="'https://i.pravatar.cc/150?u=' + worker.user.id" [alt]="worker.user.name"
                  class="w-full h-full object-cover">
              </div>
              <div>
                <h3
                  class="font-bold text-lg text-on-surface-light dark:text-on-surface-dark group-hover:text-primary transition-colors line-clamp-1">
                  {{ worker.user.name }}</h3>
                <p class="text-sm text-on-surface-light/60 dark:text-on-surface-dark/60 flex items-center gap-1 mt-0.5">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                    class="w-3.5 h-3.5 text-gray-400">
                    <path fill-rule="evenodd"
                      d="M9.69 18.933l.003.001C9.89 19.02 10 19 10 19s.11.02.308-.066l.002-.001.006-.003.018-.008a5.741 5.741 0 0 0 .281-.14c.186-.096.446-.24.757-.433.62-.384 1.445-.966 2.274-1.765C15.302 14.988 17 12.493 17 9A7 7 0 1 0 3 9c0 3.492 1.698 5.988 3.355 7.62.829.799 1.654 1.381 2.274 1.766.311.192.571.337.757.433.093.048.17.085.224.114.027.014.05.026.066.034a.754.754 0 0 0 .018.008l.006.003ZM10 11.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5Z"
                      clip-rule="evenodd" />
                  </svg>
                  {{ worker.location }}
                </p>
              </div>
            </div>

            <div
              class="flex flex-col items-center justify-center bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 px-3 py-1.5 rounded-xl border border-yellow-100 dark:border-yellow-900/30">
              <div class="flex items-center gap-1 font-bold">
                5.0
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                  <path fill-rule="evenodd"
                    d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401Z"
                    clip-rule="evenodd" />
                </svg>
              </div>
            </div>
          </div>

          <p
            class="text-on-surface-light/80 dark:text-on-surface-dark/80 text-sm line-clamp-3 mb-5 flex-1 relative z-10">
            {{ worker.bio }}
          </p>

          <div class="flex flex-wrap gap-2 mb-6 mt-auto relative z-10">
            <span *ngFor="let category of worker.categories | slice:0:3"
              class="px-3 py-1 rounded-lg bg-gray-50 dark:bg-gray-800 text-xs font-semibold text-gray-600 dark:text-gray-300 border border-gray-100 dark:border-gray-700">
              {{ category.name }}
            </span>
          </div>

          <a [routerLink]="['/worker', worker.id]"
            class="w-full flex items-center justify-center gap-2 py-3 rounded-xl bg-primary text-white font-bold shadow-lg shadow-primary/30 hover:shadow-primary/50 hover:bg-primary-dark transition-all duration-300 relative z-10 group-hover:scale-[1.02]">
            {{ 'HOME.HERO.VIEW_PROFILE' | translate }}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
              stroke="currentColor" class="w-4 h-4 group-hover:translate-x-1 transition-transform">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
            </svg>
          </a>

          <!-- Decorative background element for hovering -->
          <div
            class="absolute -bottom-10 -right-10 w-40 h-40 bg-primary/5 rounded-full blur-2xl group-hover:bg-primary/10 transition-colors duration-500">
          </div>
        </div>
      </div>
    </div>

    <!-- CTA for Guests (Unauthenticated) -->
    <div *ngIf="!currentUser"
      class="relative rounded-3xl overflow-hidden bg-gradient-to-r from-primary to-secondary p-12 text-center text-white shadow-2xl animate-on-scroll">
      <div class="absolute inset-0 bg-black/10"></div>
      <div class="relative z-10">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">{{ 'HOME.HERO.CTA.TITLE' | translate }}</h2>
        <p class="text-lg md:text-xl opacity-90 mb-8 max-w-2xl mx-auto">{{ 'HOME.HERO.CTA.SUBTITLE' | translate }}</p>
        <button (click)="openRegisterModal()"
          class="bg-white text-primary font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300">
          {{ 'HOME.HERO.CTA.BTN' | translate }}
        </button>
      </div>
    </div>

    <!-- CTA for Workers -->
    <div *ngIf="currentUser?.role === Role.TRABALHADOR"
      class="relative rounded-3xl overflow-hidden bg-gradient-to-r from-gray-700 to-gray-900 dark:from-surface-dark dark:to-background-dark p-12 text-center text-white shadow-2xl animate-on-scroll border border-gray-600 dark:border-gray-700">
      <div class="absolute inset-0 bg-primary/5"></div>
      <div class="relative z-10">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">Pronto para fechar mais negócios?</h2>
        <p class="text-lg md:text-xl opacity-90 mb-8 max-w-2xl mx-auto">Mantenha seu portfólio atualizado e gerencie as
          propostas de serviço enviadas para você pelos clientes.</p>
        <a routerLink="/dashboard/worker/requests"
          class="inline-block bg-primary text-white font-bold py-3 px-8 rounded-full shadow-lg shadow-primary/30 hover:shadow-primary/50 transition-all duration-300 hover:scale-105 cursor-pointer">
          Ir para o Painel de Controle
        </a>
      </div>
    </div>

  </div>
</div>